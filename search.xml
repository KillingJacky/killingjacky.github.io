<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Build an Automatic Clothes Dryer]]></title>
    <url>%2F2018%2F02%2F03%2Fbuild-an-automatic-clothes-dryer%2F</url>
    <content type="text"><![CDATA[Have you ever been bothered that after a perfect bath you have to stand in the cold winter wind more than one minute to put your underwear onto the clothes dryer, just because the old crank doesnâ€™t work fluently? I have, itâ€™s really painful for a person like me that doesnâ€™t like cold weather in the winter. What I need is an automatic dryer that I can control remotely in the room. I built one, with less money but flexible functionalities. Letâ€™s see what features it has: Motor driven Mechanical position limitation Linear positioning with optical encoder Linear height control with analog rotator RF control MQTT control I fixed it on the wall of balcony of my house, replaced the old crank of this liftable clothes dryer. The motor controller with RF - I bought it from taobao.com of alibaba. The closure is made of a gift box. I cut a window on the top to let the lifting rope go through. This is all the stuff inside the box, including motor, rope spooler, optical encoder, another controller board and a DC-DC convertor. Rope spooler. This is another controller board which communicates with the motor controller. The motor controller has extensional GPIOs for controlling the motor to UP/DOWN/STOP from outside. The first function I want to have is the MQTT control, with which I can include this auto dryer into my home-assistant system. This means that I need the WiFi connection for the controller, I used the Linkit Smart 7688 Duo board from SeeedStudio. This board is a powerful little piece with low cost, it has: 580 MHz MIPS CPU Single input single output(1T1R) Wi-Fi 802.11 b/g/n (2.4G) Pin-out for GPIO, I2C, SPI, SPIS, UART, PWM and Ethernet Port 32MB Flash and 128MB DDR2 RAM USB host Micro SD slot Support for Arduino (ATmega32U4) So I got a system diagram like this: ProgrammingArduino123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430#include &lt;math.h&gt;#include &lt;avr/eeprom.h&gt;#include &lt;EEPROM.h&gt;#include &lt;Wire.h&gt;#include &lt;Encoder.h&gt;#include &lt;SoftwareSerial.h&gt;//status#define ST_STOP 0#define ST_UP 1#define ST_TITTLE_UP 2#define ST_DOWN 3#define ST_TITTLE_DOWN 4#define ST_MUST_STOP 5#define ST_RUN 6#define ST_IDLE 100// pins#define PIN_KNOB A0#define PIN_UP 7#define PIN_STOP 6#define PIN_DOWN 5#define PIN_ENC_A 2#define PIN_ENC_B 3// knob#define THRES_KNOB 25 //3cm resolution#define KNOB_AVG_TIMES 10#define KNOB_WAIT_TIME_BEFORE_STOP 100 //ms// motor#define MOTOR_CTRL_PULSE 250 //ms// others#define ENABLE_SLOWTASK true#define SLOW_LOOP_DURATION 10000#define TITTLE_UP_THRES 200#define TITTLE_DOWN_THRES 200#define DEADZONE 50#define DEBUG_SER Serial#define COMM_SER Serial1int key = -1;int status = -1;int last_status = -1;boolean auto_mode = false;boolean was_moving = false;boolean triggered = false;int32_t cur_pos, target_pos, total_len, last_saved_pos;int32_t trigger_all_lux, trigger_half_lux;long last_slow_loop_time, last_save_pos_time;float temp = 0;unsigned long lux = 0;uint32_t cur_knob, last_knob, sum_knob, knob_sum_cnt;bool knob_moving = false;long last_knob_move_time;//SoftwareSerial mySerial(10, 11); // RX, TXEncoder encoder(PIN_ENC_A, PIN_ENC_B);long encoder_pos;String recv_buffer;void setup()&#123; pinMode(PIN_UP, OUTPUT); pinMode(PIN_STOP, OUTPUT); pinMode(PIN_DOWN, OUTPUT); digitalWrite(PIN_UP, 1); digitalWrite(PIN_STOP, 1); digitalWrite(PIN_DOWN, 1); COMM_SER.begin(57600); DEBUG_SER.begin(115200); COMM_SER.setTimeout(10); DEBUG_SER.println("&gt; on-start...");// save_pos_to_eeprom(0);// save_len_to_eeprom(2000); restore_len_from_eeprom(&amp;total_len); restore_pos_from_eeprom(&amp;cur_pos); target_pos = cur_pos; encoder.write(cur_pos); last_saved_pos = -1; last_knob = cur_knob = analogRead(PIN_KNOB); sum_knob = knob_sum_cnt = 0; recv_buffer.reserve(64); DEBUG_SER.print("&gt; init over!\r\n&gt; cur_pos: "); DEBUG_SER.print(cur_pos); DEBUG_SER.print(", total_len: "); DEBUG_SER.println(total_len);&#125;void loop()&#123; process_air_commands(); process_knob_action(); process_position_fixing(); state_machine_process_state(); //slow task if (millis() - last_slow_loop_time &gt; SLOW_LOOP_DURATION &amp;&amp; ENABLE_SLOWTASK) &#123; last_slow_loop_time = millis(); do_slow_task(); &#125; delay(10);&#125;void process_air_commands()&#123; int cnt = COMM_SER.available(); if (cnt &gt; 0) &#123;// //clear the string// for (int i = 0; i &lt; recv_buffer.length(); i++) &#123;// recv_buffer.setCharAt(i, '\0');// &#125;// //fill the string// int j = 0;// while (cnt-- &gt; 0) &#123;// recv_buffer.setCharAt(j, COMM_SER.read());// &#125; recv_buffer = COMM_SER.readStringUntil('\r'); DEBUG_SER.print("&gt; recv string: "); DEBUG_SER.println(recv_buffer); //parse the string if (recv_buffer.indexOf("C0") &gt; -1) &#123; //calibrate pos 0 target_pos = cur_pos = -20; encoder.write(0); save_pos_to_eeprom(cur_pos); &#125; else if (recv_buffer.indexOf("C100") &gt; -1) &#123; //calibrate pos 100 if (cur_pos &gt; 0) &#123; total_len = cur_pos - 20; save_pos_to_eeprom(cur_pos); save_len_to_eeprom(total_len); DEBUG_SER.print("&gt; total_len: "); DEBUG_SER.println(total_len); &#125; &#125; else if (recv_buffer.indexOf("OPEN") &gt; -1) &#123; target_pos = 0; triggered = true; &#125; else if (recv_buffer.indexOf("CLOSE") &gt; -1) &#123; target_pos = total_len; triggered = true; &#125; else if (recv_buffer.indexOf("STOP") &gt; -1) &#123; target_pos = cur_pos; triggered = true; &#125; else if (recv_buffer.indexOf("POS") &gt; -1) &#123; String pos_str = recv_buffer.substring(recv_buffer.indexOf("POS") + 3); int pos = pos_str.toInt(); DEBUG_SER.print("&gt; recv pos: "); DEBUG_SER.println(pos); if (pos &gt;= 0 &amp;&amp; pos &lt;= 100) &#123; target_pos = map(pos, 0, 100, total_len, 0); triggered = true; &#125; &#125; recv_buffer = ""; &#125;&#125;void send_pos_to_air(int32_t pos)&#123; int p = map(pos, 0, total_len, 100, 0); COMM_SER.println(p, DEC); if (p &lt;= 2) &#123; COMM_SER.println("closed"); &#125; if (p &gt;= 98) &#123; COMM_SER.println("open"); &#125;&#125;void process_knob_action()&#123; sum_knob += analogRead(PIN_KNOB); knob_sum_cnt++; if (knob_sum_cnt &gt;= KNOB_AVG_TIMES) &#123; knob_sum_cnt = 0; cur_knob = sum_knob / KNOB_AVG_TIMES; sum_knob = 0; &#125; else &#123; return; &#125; if (abs(cur_knob - last_knob) &gt; THRES_KNOB) &#123; knob_moving = true; last_knob_move_time = millis(); last_knob = cur_knob; DEBUG_SER.print("&gt; cur_knob: "); DEBUG_SER.print(cur_knob); DEBUG_SER.print(", delta knob: "); DEBUG_SER.println(abs(cur_knob - last_knob)); &#125; else &#123; if (knob_moving &amp;&amp; (millis() - last_knob_move_time) &gt; KNOB_WAIT_TIME_BEFORE_STOP) &#123; knob_moving = false; // just stop, should take some actions target_pos = map(last_knob, 0, 1023, 0, total_len); triggered = true; DEBUG_SER.print("&gt;target pos was set by knob: "); DEBUG_SER.println(target_pos); &#125; &#125;&#125;/** Position fixing and state transfer*/void process_position_fixing()&#123; //read position cur_pos = encoder.read();// DEBUG_SER.print("&gt; cur pos: ");// DEBUG_SER.println(cur_pos); //down if (target_pos - cur_pos &gt; DEADZONE &amp;&amp; triggered) &#123;// if (target_pos - cur_pos &lt; TITTLE_DOWN_THRES)// &#123;// status = ST_TITTLE_DOWN;// &#125; else status = ST_DOWN; &#125; //up else if (target_pos - cur_pos &lt; -DEADZONE &amp;&amp; triggered) &#123;// if (target_pos - cur_pos &gt; -TITTLE_UP_THRES)// &#123;// status = ST_TITTLE_UP;// &#125; else status = ST_UP; &#125; else if (triggered) &#123; status = ST_STOP; triggered = false; &#125;&#125;void state_machine_process_state()&#123; switch (status) &#123; case ST_UP: if (last_status != ST_UP) &#123; motor_up(); was_moving = true; &#125; if (millis() - last_save_pos_time &gt; 5000) &#123; save_pos_to_eeprom(cur_pos); last_save_pos_time = millis(); send_pos_to_air(cur_pos); &#125; last_status = ST_UP; break;// case ST_TITTLE_UP:// motor_up();// delay(abs(cur_pos - target_pos));// motor_stop();// delay(10);// was_moving = true;// last_status = ST_TITTLE_UP;// break; case ST_DOWN: if (last_status != ST_DOWN) &#123; motor_down(); was_moving = true; &#125; if (millis() - last_save_pos_time &gt; 5000) &#123; save_pos_to_eeprom(cur_pos); last_save_pos_time = millis(); send_pos_to_air(cur_pos); &#125; last_status = ST_DOWN; break;// case ST_TITTLE_DOWN:// motor_down();// delay(abs(cur_pos - target_pos));// motor_stop();// delay(100);// was_moving = true;// last_status = ST_TITTLE_DOWN;// break; case ST_MUST_STOP: case ST_STOP: if (last_status != ST_STOP) motor_stop(); if (was_moving) &#123; was_moving = false; save_pos_to_eeprom(cur_pos); last_save_pos_time = millis(); send_pos_to_air(cur_pos); &#125; last_status = ST_STOP; break; default: break; &#125;&#125;void do_slow_task()&#123; DEBUG_SER.println("&gt; ---- slow task start ----"); DEBUG_SER.print("# cur pos: "); DEBUG_SER.println(cur_pos); DEBUG_SER.print("# target pos: "); DEBUG_SER.println(target_pos); DEBUG_SER.print("# status: "); DEBUG_SER.println(status); if (cur_pos != last_saved_pos) &#123; save_pos_to_eeprom(cur_pos); last_save_pos_time = millis(); send_pos_to_air(cur_pos); &#125; DEBUG_SER.println("&gt; ---- slow task end ----");&#125;void motor_up()&#123; DEBUG_SER.println("!!! up"); pinMode(PIN_UP, OUTPUT); digitalWrite(PIN_UP, 0); delay(MOTOR_CTRL_PULSE); digitalWrite(PIN_UP, 1); pinMode(PIN_UP, INPUT_PULLUP);&#125;void motor_down()&#123; DEBUG_SER.println("!!! down"); pinMode(PIN_DOWN, OUTPUT); digitalWrite(PIN_DOWN, 0); delay(MOTOR_CTRL_PULSE); digitalWrite(PIN_DOWN, 1); pinMode(PIN_DOWN, INPUT_PULLUP);&#125;void motor_stop()&#123; DEBUG_SER.println("!!! stop"); pinMode(PIN_STOP, OUTPUT); digitalWrite(PIN_STOP, 0); delay(MOTOR_CTRL_PULSE); digitalWrite(PIN_STOP, 1); pinMode(PIN_STOP, INPUT_PULLUP);&#125;void save_4byte(int addr, uint32_t value)&#123; //EEPROM.write(addr, value &amp; 0xff); //EEPROM.write(addr + 1, (value &gt;&gt; 8) &amp; 0xff); //EEPROM.write(addr + 2, (value &gt;&gt; 16) &amp; 0xff); //EEPROM.write(addr + 3, (value &gt;&gt; 24) &amp; 0xff); eeprom_write_block((const void *)&amp;value, (void *)addr, sizeof(uint32_t));&#125;void restore_4byte(int addr, uint32_t *value)&#123; //long v; //uint8_t tmp; //tmp = EEPROM.read(addr); //v = tmp &amp; 0xff; //tmp = EEPROM.read(addr+1); //v |= (tmp &lt;&lt; 8); //tmp = EEPROM.read(addr + 2); //v |= (tmp &lt;&lt; 16); //tmp = EEPROM.read(addr + 3); //v |= (tmp &lt;&lt; 24); //*value = v; eeprom_read_block((void *)value, (void *)addr, sizeof(uint32_t));&#125;void save_len_to_eeprom(int32_t value)&#123; save_4byte(0, value);&#125;void restore_len_from_eeprom(int32_t *value)&#123; restore_4byte(0, (uint32_t *)value);&#125;void save_pos_to_eeprom(int32_t value)&#123; DEBUG_SER.print("=&gt; save pos to eep: "); DEBUG_SER.println(value); save_4byte(4, value); last_saved_pos = value;&#125;void restore_pos_from_eeprom(int32_t *value)&#123; restore_4byte(4, (uint32_t *)value);&#125; Python script in OpenWrtThe MT7688 runs the OpenWrt system, itâ€™s easy to program very complex logic there. I used my favorite programming language - Python. What I wrote is a bridge, between the Serial and MQTT. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990#!/usr/bin/env pythonimport osimport sysimport atexitimport signalimport paho.mqtt.client as mqttimport serialSERIAL_PORT = '/dev/ttyS0'SERIAL_BAUDRATE = 57600MQTT_SERVER = '192.168.4.48'MQTT_PORT = 1883MQTT_USER = 'xxx'MQTT_PWD = 'xxx'MQTT_CLIENTID = 'autorack'MQTT_KEEPALIVE_INTERVAL = 15MQTT_ALIVE_TOPIC = 'rack/alive'MQTT_CMD_TOPIC = "rack/cmd"MQTT_SETPOS_TOPIC = "rack/setpos"MQTT_STATE_TOPIC = "rack/state"MQTT_CALIBRATE_TOPIC = "rack/calibrate"# Serialser = serial.Serial(SERIAL_PORT, SERIAL_BAUDRATE)# MQTTdef on_connect(client, userdata, flags, rc): print("Connected with result code "+str(rc)) # Subscribing in on_connect() means that if we lose the connection and # reconnect then subscriptions will be renewed. client.publish(MQTT_ALIVE_TOPIC, 'online', qos=0, retain=True) client.subscribe(MQTT_CMD_TOPIC) client.subscribe(MQTT_SETPOS_TOPIC) client.subscribe(MQTT_CALIBRATE_TOPIC) userdata.reset_input_buffer() userdata.reset_output_buffer()# The callback for when a PUBLISH message is received from the server.def on_message(client, userdata, msg): print(msg.topic+" "+str(msg.payload)) if msg.topic == MQTT_SETPOS_TOPIC: userdata.write('POS' + msg.payload + '\r') elif msg.topic == MQTT_CALIBRATE_TOPIC and msg.payload.startswith('C'): userdata.write(msg.payload + '\r') elif msg.topic == MQTT_CMD_TOPIC: userdata.write(msg.payload + '\r')client = mqtt.Client(client_id=MQTT_CLIENTID, userdata=ser)client.will_set(MQTT_ALIVE_TOPIC, payload='offline', qos=0, retain=True)client.username_pw_set(MQTT_USER, password=MQTT_PWD)client.on_connect = on_connectclient.on_message = on_messageclient.connect(MQTT_SERVER, MQTT_PORT, MQTT_KEEPALIVE_INTERVAL)client.loop_start()## Exit handlers ### This function stops python from printing a stacktrace when you hit control-Cdef SIGINTHandler(signum, frame): raise SystemExit# This function lets you run code on exit, including functions from myDigitalLightSensordef exitHandler(): print("Exiting") client.loop_stop() ser.close() sys.exit(0)# Register exit handlerssignal.signal(signal.SIGINT, SIGINTHandler)atexit.register(exitHandler)line = b''while True: c = ser.read() if c == b'\r' or c == b'\n': # handle line line = line.strip() if line: client.publish(MQTT_STATE_TOPIC, line) line = b'' else: line += c Save this script to /root/mqtt2serial.py, and add it to rc.local to let it startup at boot. 123$ vim /etc/rc.local# insert the following line before the line "exit 0"/root/mqtt2serial.py &gt; /root/log.txt Home Assistant ConfigurationThe dryer can be seen as a Cover device in home-assistant. With the MQTT topics exposed in the bridge script, we can configure this cover in home-assistantâ€™s configuration file like this: configuration.yaml1234567891011121314151617181920212223242526272829cover: - platform: mqtt name: "Clothes Dryer" command_topic: "rack/cmd" set_position_topic: "rack/setpos" state_topic: "rack/state" availability_topic: "rack/alive" qos: 0 payload_open: "OPEN" payload_close: "CLOSE" payload_stop: "STOP" state_open: "open" state_closed: "closed" payload_available: "online" payload_not_available: "offline" optimistic: falseswitch: - platform: mqtt name: "Clothes Dryer Calibrate C0" command_topic: "rack/calibrate" payload_on: "C0" payload_off: "Null" - platform: mqtt name: "Clothes Dryer Calibrate C100" command_topic: "rack/calibrate" payload_on: "C100" payload_off: "Null" Those two switches are used to calibrate the 0 and 100 position of the cover device in the home-assistant. Use the physical button of the motor controller to control the dryer rack move to the top (the position that youâ€™re comfortable with), switch on the home-assistant switch Clothes Dryer Calibrate C0 to remember the 0 position, then switch off Clothes Dryer Calibrate C0. Again use the physical button of the motor controller to control the dryer rack move to the bottom, switch on the home-assistant switch Clothes Dryer Calibrate C100 to remember the 100 position, then switch off Clothes Dryer Calibrate C100. Now you can control the dryer rack within home-assistant GUI. Position 100 means to lower down the rack to the bottom. Video]]></content>
      <tags>
        <tag>tech</tag>
        <tag>mqtt</tag>
        <tag>home-assistant</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Work around for macOS Mail.app eating high CPU]]></title>
    <url>%2F2017%2F03%2F09%2Fwork-around-for-macos-mail-app-eating-high-cpu%2F</url>
    <content type="text"><![CDATA[The work around is based on a software named monit. Letâ€™s see what monit do. Monit is a small Open Source utility for managing and monitoring Unix systems. Monit conducts automatic maintenance and repair and can execute meaningful causal actions in error situations. Step-by-stepI. Install monit Download monit here for 64bits macOS https://mmonit.com/monit/dist/binary/5.21.0/monit-5.21.0-macos-x64.tar.gz Extract the archive, you will get file like this: Copy files into their locations sudo cp -f bin/monit /usr/local/bin sudo chmod a+x /usr/local/bin/monit sudo cp -f conf/monitrc /usr/loca/etc sudo cp -rf man/man1/monit.1 /usr/local/share/man/man1 Test your installation monit --version II. Configure monit Add the following lines into /usr/loca/etc/monitrc 123456check process Mail matching "/Applications/Mail.app/Contents/MacOS/Mail" start program = "/usr/bin/open -a /Applications/Mail.app" stop program = "/usr/bin/pkill -9 Mail" if cpu &gt; 80% for 2 cycles then alert if cpu &gt; 100% for 2 cycles then restart III. Configure the startup script for LaunchDaemonLaunchDaemon is the startup manager for macOS, and the startup items for LaunchDaemon can be started when system boot up before user login. Itâ€™s system level. sudo vim /Library/LaunchDaemons/com.tildeslash.monit.plist Parse the following lines into that plist file 12345678910111213141516&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;&lt;plist version="1.0"&gt;&lt;dict&gt; &lt;key&gt;Label&lt;/key&gt; &lt;string&gt;com.tildeslash.monit&lt;/string&gt; &lt;key&gt;ProcessType&lt;/key&gt; &lt;string&gt;Adaptive&lt;/string&gt; &lt;key&gt;Disabled&lt;/key&gt; &lt;false/&gt; &lt;key&gt;RunAtLoad&lt;/key&gt; &lt;true/&gt; &lt;key&gt;LaunchOnlyOnce&lt;/key&gt; &lt;false/&gt; &lt;key&gt;ProgramArguments&lt;/key&gt; &lt;array&gt; &lt;string&gt;/usr/local/bin/monit&lt;/string&gt; &lt;string&gt;-I&lt;/string&gt; &lt;/array&gt;&lt;/dict&gt;&lt;/plist&gt; Now load monit sudo launchctl load -w /Library/LaunchDaemons/com.tildeslash.monit.plist Final test The monit daemon should be running now, test its status using command: sudo monit status, if everything was done right, you should see the diagnosis information of the Mail process. Besides, monit serves a http server at address http://localhost:2812 IV. Sum upThe basic idea of this workaround is to monitor the CPU usage of process Mail, if itâ€™s eating over 100% CPU for more than 1 minute, monit will restart it. Monit will check the status of Mail every 30 seconds (the default configuration), and it prints logs into the system log, you can access the log with system applicaton Console/æŽ§åˆ¶å°, e.g. To investigate if your Mail.app lose its mind for the last few days, open Console application and search monit. If any entry out there, bla bla 1000 words for the excellent Mail.app!!! Also, you can check the uptime of Mail.app in the web page of monit with default user/password - admin/monit.]]></content>
      <tags>
        <tag>tech</tag>
        <tag>mac</tag>
        <tag>Mail.app</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DIY an iRobot Roomba Compatible Virtual Wall]]></title>
    <url>%2F2016%2F11%2F25%2Fdiy-an-irobot-roomba-virtual-wall%2F</url>
    <content type="text"><![CDATA[I need more virtual walls for my iRobot Roomba 650, and I find that itâ€™s not too complicated to make that. So I did some electronic monitoring and software tinkering, then I successfully made several ones - working good. The IR protocolHereâ€™s my research, maybe different from some old discussions (maybe theyâ€™re for series 4000 or newer 5), but this protocol is proved to be working for 650. Letâ€™s struct the IR signal from small to big. The smallest unit is a 38KHz PWM with 50% duty Then the PWM continues for 500us, call this A Then A * 3, period 8ms, call this 3 pulses B Then B repeats every 150msâ€¦ The hardware stm32L011 - Ultra low power MCU ETA6003 - battery charging ETA3410 - battery voltage to 3.3V regular TSAL6200 - emitter Battery 1000mAh Avg current consumption is around 1mA, the battery is expected to power this little device for 1 month at least. The softwareNot open sourceðŸ˜œ The enclosure3D printed, have no time to laser cut a coverâ€¦ Images and video]]></content>
      <tags>
        <tag>tech</tag>
        <tag>irobot</tag>
        <tag>roomba</tag>
        <tag>virtual wall</tag>
        <tag>irobot create</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SyncY in Synology NAS | åœ¨ç¾¤æ™–ä¸­ä½¿ç”¨SyncYåŒæ­¥ç™¾åº¦äº‘]]></title>
    <url>%2F2016%2F11%2F25%2Fsyncy-in-synology-nas%2F</url>
    <content type="text"><![CDATA[1 å®‰è£…Dockerå¥—ä»¶å¥—ä»¶ä¸­å¿ƒå®‰è£…ï¼Œç•¥ã€‚ 2 ä¸‹è½½syncyé•œåƒæ‰¾å¼€Dockerå¥—ä»¶ï¼Œæ³¨å†Œè¡¨ä¸­æœç´¢syncyï¼Œå¾—åˆ°ç»“æžœ chiunownow/syncy ï¼ŒåŒå‡»ä¸‹è½½ã€‚å¦‚æžœæŠ¥é”™ï¼Œè¯·è½¬å…¥å‘½ä»¤è¡Œä¸‹è½½ï¼Œsshç™»å…¥åŽè¿è¡Œ docker pull chiunownow/syncy ç½‘é€Ÿæ…¢çš„å¾—ç­‰å¾…ä¸€ä¼šå„¿äº†ï¼ˆå…¶å®žæ˜¯å¾ˆä¹…å¾ˆä¹…å¾ˆä¹…ã€‚ã€‚ã€‚ï¼‰ ä»€ä¹ˆï¼Ÿä¸çŸ¥é“æ€Žä¹ˆç™»å…¥sshï¼Ÿè¯·çœ‹ä¸‹ä¸€æ­¥ 3 ä½¿èƒ½sshå¹¶ç™»å…¥æŽ§åˆ¶é¢æ¿ -&gt; ç»ˆç«¯æœºå’ŒSNMP -&gt; å‹¾é€‰å¯åŠ¨SSHåŠŸèƒ½ ä½¿ç”¨è‡ªå·±ç†Ÿæ‚‰çš„ç»ˆç«¯ç™»å…¥sshï¼ˆæ¯”å¦‚windowsä¸‹çš„puttyï¼Œmac/linuxä¸‹çš„terminalï¼Œå¤ªåŸºç¡€ä¸ä¼šçš„è‡ªå·±åº¦å¨˜è°·ç‹—å§ï¼‰ ssh root@your-nas-address å¯†ç ä¸ºåˆå»ºç®¡ç†å‘˜å¯†ç ã€‚ 4 Syncyé…ç½®ä»¥ä¸‹éƒ½æ˜¯åœ¨sshä¸­ã€‚ docker run --name sss -it chiunownow/syncy /bin/bash çŽ°åœ¨è¿›å…¥äº†å®¹å™¨å‘½ä»¤è¡Œï¼Œè¿è¡Œ /usr/bin/syncy.py ä¼šå¾—åˆ°è¿™æ ·çš„æ‰“å° 1234567Device binding Guide: 1. Open web browser to visit:&quot;https://openapi.baidu.com/device&quot; and input user code to binding your baidu account. 2. User code: xxxxxx (User code valid for 30 minutes.) 3. After granting access to the application, come back here and press [Enter] to continue. ä¸€é€šå¤åˆ¶ç²˜è´´ç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚ã€‚ã€‚ã€‚ã€‚æœ€åŽctrl+Cç»“æŸã€‚ è¿™æ—¶å®Œæˆçš„äº‹æƒ…æ˜¯æ‹¿åˆ°äº†ç™¾åº¦äº‘çš„tokenï¼ŒåŒæ—¶å†™å…¥äº†é…ç½®æ–‡ä»¶/etc/config/syncy æˆ‘ä»¬è¦æŠŠè¿™ä¸ªé…ç½®æ–‡ä»¶æžå‡ºæ¥ cat /etc/config/syncy å¤åˆ¶ã€‚ç„¶åŽé€€å‡ºdocker exit åœ¨DSMç³»ç»Ÿä¸­æ‰¾ä¸€ä¸ªä½ç½®å­˜æ”¾é…ç½®æ–‡ä»¶ï¼Œ mkdir -p /volume1/docker/syncy cd /volume1/docker/syncy cat &gt; syncy-photo ç²˜è´´ï¼Œctrl+dä¿å­˜ã€‚ è¿™ä¸ªé»˜è®¤çš„é…ç½®ä¼šæŠŠæ–‡ä»¶åŒæ­¥åˆ°ç™¾åº¦äº‘çš„â€œæˆ‘çš„åº”ç”¨æ•°æ®/SyncY/Syncy-dockerç›®å½•ä¸‹ï¼Œå¦‚æžœæƒ³åŒæ­¥åˆ°å¦å¤–çš„ç›®å½•ï¼Œæˆ–SyncYå¤šå¼€ï¼Œå¯ä»¥æ‰¾åˆ°option remotepath &#39;/Syncy-docker&#39;ä¿®æ”¹æˆæƒ³è¦çš„ç›®å½•åã€‚ æœ€åŽåˆ é™¤ä¸´æ—¶å®¹å™¨ docker rm sss å‘Šåˆ«å‘½ä»¤è¡Œå›žåˆ°DSMçš„å›¾å½¢ç•Œé¢ã€‚ 5 åˆ›å»ºSyncyå®¹å™¨æ‰“å¼€Dockerå¥—ä»¶ï¼Œåœ¨â€æ˜ åƒâ€œä¸­é€‰æ‹©â€chiunownow/syncyâ€œï¼Œâ€å¯åŠ¨â€ï¼Œâ€é€šè¿‡å‘å¯¼å¯åŠ¨â€ å®¹å™¨åç§° ä¸‹ä¸€æ­¥ï¼Œé«˜çº§è®¾ç½®ï¼Œå·ï¼Œæ·»åŠ æ–‡ä»¶ æ·»åŠ æ–‡ä»¶å¤¹ æ³¨æ„çº¢æ¡†å†…çš„è£…è½½è·¯å¾„å¿…é¡»è¿™æ ·å¡« FIX: /etc/config/syncy åªè¯»å±žæ€§åŽ»æŽ‰ â€œçŽ¯å¢ƒâ€ï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œsh /usr/bin/syncyd.sh æœ€åŽæ˜¯è¿™æ ·å­çš„ å¯åŠ¨å®¹å™¨ æˆåŠŸè¿è¡Œ ï¼ï¼æ³¨æ„ï¼ï¼é»˜è®¤çš„é…ç½®æ˜¯1å°æ—¶åŒæ­¥ä¸€æ¬¡ï¼Œè¿™ç§æ…¢æ‰«é€‚åˆåŒæ­¥ç…§ç‰‡ç­‰ä¸ç´§æ€¥å¤‡ä»½ä»»åŠ¡ï¼Œæˆ–æ–‡ä»¶æ•°é‡å·¨å¤§çš„ç›®å½•(äº‘ä¸Žæœ¬åœ°ç›®å½•çš„æ¯”å¯¹æˆæœ¬å¾ˆé«˜)ï¼Œæƒ³è¦ç«‹å³åŒæ­¥ï¼Œå¯é‡å¯å®¹å™¨ã€‚ å¯è‡ªè¡Œä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„syncintervalæé«˜åŒæ­¥æ‰«æé¢‘çŽ‡ï¼Œæ¯”å¦‚ä»Žç™¾åº¦äº‘æŽ¨é€æ–‡ä»¶å›žNASï¼Œå¯è®¾1åˆ†é’Ÿæˆ–æ›´å°ï¼Œä½†åˆ‡è®°æ–‡ä»¶æ•°ä¸è¦å¤ªå¤šï¼Œè¿™ç§å¿«æ‰«ä¼šæ¶ˆè€—è¾ƒå¤šçš„CPUèµ„æºã€‚ å¦å¤–ï¼ŒsyncyåŽŸä½œè€…é’ˆå¯¹é…ç½®é¡¹å†™äº†è¯¦å°½æ–‡æ¡£ï¼Œhttp://www.syncy.cn/index.php/syncyconfighelp/ ï¼Œ æ‡‚çš„è‡ªå·±æŠ˜è…¾å§ 6 å¤šå¼€/åŒæ­¥å¤šä¸ªç›®å½•é‡å¤4ï¼Œ5æ­¥ ðŸ˜Ž é…ç½®é¡¹è§£é‡Š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182# synctype:[0-4]# [0,upload]:åªæ£€æŸ¥æœ¬åœ°æ–‡ä»¶å¹¶ä¸Šä¼ ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œå¿½ç•¥è¿œç«¯çš„æ‰€æœ‰ä¿®æ”¹æˆ–åˆ é™¤ï¼Œè¿œç«¯åˆ é™¤çš„ä¹Ÿä¸å†ä¸Šä¼ # [1,upload+]:è¿œç«¯æ˜¯æœ¬åœ°çš„å®Œå…¨é•œåƒï¼Œå¿½ç•¥è¿œç«¯çš„ä¿®æ”¹ï¼Œè¿œç«¯åˆ é™¤çš„æ–‡ä»¶åœ¨ä¸‹ä¸€æ¬¡åŒæ­¥æ—¶å°†ä¸Šä¼ ï¼Œè¿œç«¯æ–°å¢žçš„æ–‡ä»¶å¦‚æžœæœ¬åœ°ä¸å­˜åœ¨ï¼Œå°†ä¸åšä»»ä½•å˜åŒ–# [2,download]:åªæ£€æŸ¥è¿œç«¯æ–‡ä»¶æ˜¯å¦ä¿®æ”¹ï¼Œå¦‚æœ‰ä¿®æ”¹ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¿½ç•¥æœ¬åœ°çš„ä¿®æ”¹ï¼›å¦‚æœ¬åœ°æ–‡ä»¶è¢«åˆ é™¤ï¼Œå°†ä¸å†ä¸‹è½½# [3,download+]:æ£€æŸ¥è¿œç«¯å’Œæœ¬åœ°æ–‡ä»¶ï¼Œå¦‚è¿œç«¯æœ‰ä¿®æ”¹ï¼Œä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¿½ç•¥æœ¬åœ°çš„ä¿®æ”¹ï¼›å¦‚æœ¬åœ°æœ‰æ–‡ä»¶è¢«åˆ é™¤ï¼Œå°†é‡æ–°ä¸‹è½½# [4,sync]:åŒæ—¶æ£€æŸ¥è¿œç«¯å’Œæœ¬åœ°æ–‡ä»¶ï¼Œå¦‚åªæœ‰è¿œç«¯è¢«ä¿®æ”¹ï¼Œåˆ™ä¸‹è½½åˆ°æœ¬åœ°ï¼›å¦‚åªæœ‰æœ¬åœ°ä¿®æ”¹ï¼Œåˆ™ä¸Šä¼ åˆ°è¿œç«¯ï¼›å¦‚æœ¬åœ°å’Œè¿œç«¯éƒ½è¢«ä¿®æ”¹ï¼Œåˆ™ä»¥å†²çªè®¾ç½®æ–¹å¼ä¸ºå‡†ã€‚# 0-3æ¨¡å¼ä¸‹ï¼Œç›®çš„ç«¯è‡ªä¸»æ–°å¢žçš„æ–‡ä»¶ä¸ä¼šè¢«åˆ é™¤# 4æ¨¡å¼ä¸‹ï¼Œå½“è¿œç«¯ç›®å½•æ›´æ”¹åŽï¼Œè¯·åˆ é™¤æœ¬åœ°åŒæ­¥æ ¹ç›®å½•ä¸‹çš„.syncy.info.dbæ–‡ä»¶ï¼Œå¦åˆ™åœ¨ä¸‹æ¬¡åŒæ­¥æ—¶å°†ä¼šåˆ é™¤æœ¬åœ°çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆç³»ç»Ÿä¼šè®¤ä¸ºè¿œç¨‹æ–‡ä»¶ä¸éœ€è¦è¢«ç”¨æˆ·åˆ é™¤ï¼Œä¹Ÿä¼šåˆ é™¤æœ¬åœ°çš„ç›¸åº”æ–‡ä»¶ï¼‰syncyerrlog=â€# é”™è¯¯æ—¥å¿—æ–‡ä»¶ï¼ˆåŒ…å«è·¯å¾„åï¼‰ï¼Œä¸ºç©ºæ—¶å°†è¾“å‡ºè‡³é”™è¯¯è¾“å‡ºï¼ˆé»˜è®¤å±å¹•ï¼‰# è®¾ç½®å€¼å¿…é¡»æ˜¯æŒ‡å‘æ–‡ä»¶ï¼Œæ–‡ä»¶å¯ä»¥ä¸å­˜åœ¨ï¼ˆä¸å­˜åœ¨æ—¶ç¨‹åºè‡ªåŠ¨åˆ›å»ºï¼‰ï¼Œçˆ¶ç›®å½•å¿…é¡»å­˜åœ¨ï¼Œä¸èƒ½æŒ‡å‘å·²å­˜åœ¨çš„ç›®å½•# ä¾‹ï¼š/mnt/sda1/log/syncyerr.logsyncylog=â€# è¿è¡Œæ—¥å¿—æ–‡ä»¶ï¼ˆåŒ…å«è·¯å¾„åï¼‰ï¼Œä¸ºç©ºæ—¶å°†è¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºï¼ˆé»˜è®¤å±å¹•ï¼‰# è®¾ç½®å€¼å¿…é¡»æ˜¯æŒ‡å‘æ–‡ä»¶ï¼Œæ–‡ä»¶å¯ä»¥ä¸å­˜åœ¨ï¼ˆä¸å­˜åœ¨æ—¶ç¨‹åºè‡ªåŠ¨åˆ›å»ºï¼‰ï¼Œçˆ¶ç›®å½•å¿…é¡»å­˜åœ¨ï¼Œä¸èƒ½æŒ‡å‘å·²å­˜åœ¨çš„ç›®å½•# ä¾‹ï¼š/mnt/sda1/log/syncy.logblocksize=â€™10â€™# åˆ†ç‰‡ä¸Šä¼ å—å¤§å°# é»˜è®¤å€¼ä¸º 10 (10M)# å•ä½ Mï¼Œæ­¤å¤§å°å†³å®šäº†èƒ½ä¸Šä¼ çš„æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆæ–‡ä»¶æœ€å¤§å¤§å° = blocksize * 1024ï¼‰# åˆ†ç‰‡å¤§å°å¿…é¡»å¤§äºŽç­‰äºŽ1ï¼ˆ1Mï¼‰ondup=â€™renameâ€™# é‡åå¤„ç†æ–¹å¼# é»˜è®¤å€¼ä¸º â€˜renameâ€™# [rename or overwrite]# å­˜åœ¨é‡åæ–‡ä»¶æ—¶æ˜¯è¦†ç›–åŒåæ–‡ä»¶ï¼Œè¿˜æ˜¯é‡å‘½åæ–‡ä»¶# å½“åŒæ­¥æ¨¡å¼ä¸º0ï¼Œé‡å‘½åæ–°æ–‡ä»¶ï¼Œå‘½åè§„åˆ™ä¸ºâ€œæ–‡ä»¶å_æ—¥æœŸ.åŽç¼€â€# åŒæ­¥æ¨¡å¼ä¸º1å’Œ2æ—¶ï¼Œå°†é‡å‘½åæ—§æ–‡ä»¶ï¼Œå‘½åè§„åˆ™ä¸ºâ€œæ–‡ä»¶å_old_æ—¥æœŸ.åŽç¼€â€# åŒæ­¥æ¨¡å¼ä¸º3æ—¶ï¼Œåˆ™ondupåªèƒ½ä¸ºoverwriteï¼Œè®¾ç½®æˆrenameå°†ä¸ç”Ÿæ•ˆdatacache=â€™onâ€™# æ˜¯å¦å¼€å¯ç¼“å­˜# é»˜è®¤å€¼ä¸º â€˜onâ€™# åŒæ­¥ä¿¡æ¯æ•°æ®ç¼“å­˜ï¼Œå¯ç”¨æœ‰åŠ©äºŽæé«˜åŒæ­¥é€Ÿåº¦# è¯·æ ¹æ®ä½ è·¯ç”±å†…å­˜çš„å¤§å°æ¥å†³å®šæ˜¯å¦å¼€å¯excludefiles=â€™*/Thumbs.dbâ€™# æŽ’é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œå°†ä¼šåŒæ—¶åº”ç”¨äºŽæœ¬åœ°å’Œè¿œç«¯ï¼Œè¯·åˆç†è®¾ç½®æ­¤å€¼ï¼Œè¿‡å¤šçš„æŽ’é™¤é€‰é¡¹å°†ä¼šé™ä½Žç³»ç»Ÿçš„å¤„ç†é€Ÿåº¦# æœ‰å¤šä¸ªæŽ’é™¤é¡¹æ—¶ç”¨åˆ†å·(;)éš”å¼€# ä¾‹ï¼šâ€™*/Thumbs.db;*/excludefilename.*â€™# é»˜è®¤æŽ’é™¤ä»¥â€œ.tmp.syyâ€ç»“å°¾çš„æ–‡ä»¶ï¼Œæ­¤ç±»åž‹æ–‡ä»¶ç”¨äºŽè®°å½•åˆ†ç‰‡ä¸Šä¼ æˆ–æ–­ç‚¹ä¸‹è½½ä¿¡æ¯ï¼Œä¸Šä¼ æˆ–ä¸‹è½½å®ŒæˆåŽå°†è‡ªåŠ¨åˆ é™¤ï¼Œå¦‚åŽŸæ–‡ä»¶è¢«æ‰‹åŠ¨ä¿®æ”¹ï¼Œå»ºè®®åŒæ—¶åˆ é™¤æ­¤æ–‡ä»¶# åªæ”¯æŒé€šé…ç¬¦*? (*ä»£è¡¨é›¶ä¸ªæˆ–æ›´å¤šä¸ªä»»æ„å­—ç¬¦ï¼Œ?ä»£è¡¨é›¶ä¸ªæˆ–ä¸€ä¸ªå­—ç¬¦)listnumber=â€™100â€²# æ¯æ¬¡æ£€æŸ¥èŽ·å–è¿œç¨‹çš„æ–‡ä»¶æ•°# é»˜è®¤å€¼ä¸º 100# åŒæ­¥æ—¶æ¯æ¬¡èŽ·å–çš„è¿œç«¯æ–‡ä»¶åˆ—è¡¨æ•°é‡ï¼Œæ•°é‡è¿‡å¤§æ—¶è¿”å›žçš„å­—ç¬¦ä¸²é•¿åº¦å¾ˆå¤§ï¼Œå°†å ç”¨æ›´å¤šçš„å†…å­˜# è·¯å¾„é•¿åº¦è¾ƒé•¿æ—¶ä¹Ÿåº”é€‚å½“ç¼©å°æ­¤å€¼retrytimes=â€™3â€²#å¤±è´¥é‡è¯•æ¬¡æ•°ï¼ˆå‘ç”Ÿé”™è¯¯æ—¶çš„é‡è¯•æ¬¡æ•°ï¼‰# é»˜è®¤å€¼ 3 æ¬¡retrydelay=â€™3â€²# é‡è¯•å»¶æ—¶æ—¶é—´ï¼ˆç§’ï¼‰# é»˜è®¤å€¼ä¸º 3 ç§’maxsendspeed=â€™0â€²# æœ€å¤§ä¸Šä¼ é€Ÿåº¦ï¼ˆå­—èŠ‚/ç§’ï¼‰# é»˜è®¤å€¼ä¸º 0(ä¸é™é€Ÿ)maxrecvspeed=â€™0â€²# æœ€å¤§ä¸‹è½½é€Ÿåº¦ï¼ˆå­—èŠ‚/ç§’ï¼‰# é»˜è®¤å€¼ä¸º 0(ä¸é™é€Ÿ)syncperiod=â€™0-24â€²# è¿è¡Œæ—¶é—´æ®µ# é»˜è®¤å€¼ä¸º â€˜0-24â€²# è¿è¡Œæ—¶é—´æ®µï¼ˆå°æ—¶ï¼‰# åˆ¤æ–­è§„åˆ™ä¸º[0,24)å³åŒ…å«è®¾å®šçš„å¼€å§‹æ—¶é—´æˆªæ­¢äºŽè®¾å®šçš„ç»“æŸæ—¶é—´# å¦‚æƒ³ä»Žé›¶ç‚¹è‡³6ç‚¹ä¹‹é—´æ‰å…è®¸è¿è¡Œï¼Œåº”è®¾ç½®ä¸ºâ€™0-6â€™ï¼Œå¦‚24å°æ—¶éƒ½è¿è¡Œï¼Œåˆ™è®¾ç½®ä¸ºâ€™0-24â€™# å¦‚æžœå½“å‰æ—¶é—´ä¸åœ¨è®¾å®šèŒƒå›´å†…ï¼Œå°†æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼Œå¦‚æžœè®¾ä¸ºç©ºï¼Œåˆ™åªè¿è¡Œä¸€æ¬¡åŽé€€å‡ºsyncinterval=â€™3600â€²# åŒæ­¥é—´éš”æ—¶é—´# é»˜è®¤å€¼ä¸º 3600(1å°æ—¶)# æ¯æ¬¡åŒæ­¥å®Œæˆä¹‹åŽä¸Žä¸‹ä¸€æ¬¡å¼€å§‹åŒæ­¥çš„é—´éš”æ—¶é—´# å•ä½ï¼šç§’]]></content>
      <tags>
        <tag>tech</tag>
        <tag>SyncY</tag>
        <tag>NAS</tag>
        <tag>docker</tag>
        <tag>ç™¾åº¦äº‘</tag>
        <tag>ç¾¤æ™–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Use Slack App to Issue Thunder Remote Download Task]]></title>
    <url>%2F2016%2F11%2F25%2Fslack-thunder%2F</url>
    <content type="text"><![CDATA[This article involves a product within China - Thunder Remote Download. So will be in Chinese. ä½¿ç”¨Slackä¸‹è¾¾è¿…é›·è¿œç¨‹ä¸‹è½½æŒ‡ä»¤ç®€ä»‹è¿™æ˜¯ä¸€ä¸ªç”¨slackèŠå¤©ç•Œé¢ä¸‹è¾¾è¿…é›·è¿œç¨‹ä¸‹è½½æŒ‡ä»¤çš„ç¨‹åºã€‚ éƒ¨ç½²å‡†å¤‡ ä¸€å°èƒ½å¤Ÿè¿žæŽ¥è¿…é›·æœåŠ¡å™¨å’ŒslackæœåŠ¡å™¨çš„æœºå™¨ï¼Œä¾‹å¦‚ï¼šNASï¼ŒVPSã€‚èƒ½è¿è¡ŒPythonçš„è·¯ç”±ä¹Ÿè¡Œã€‚ dockerçŽ¯å¢ƒå‡†å¤‡ã€‚æœ¬æ–‡å°†ä»‹ç»ä»¥dockeræ–¹å¼éƒ¨ç½²ï¼Œè£¸æœºå®‰è£…æ–¹å¼è‡ªè¡Œç ”ç©¶ã€‚ è¿…é›·å¸å·ã€‚ slackå¸å·ä»¥åŠApp token. ä¸ªäººç”¨æˆ·èŽ·å¾—tokenæœ€ç®€å•çš„æ–¹æ³•æ˜¯ç”Ÿæˆtest tokenï¼Œ å‰å¾€æ­¤å¤„ç”Ÿæˆhttps://api.slack.com/docs/oauth-test-tokens éƒ¨ç½² docker pull killingjacky/slackthunder å‡†å¤‡å®¿ä¸»æœºç›®å½•å’Œé…ç½®æ–‡ä»¶mkdir slackthundercd slackthunderwget -O config.py https://raw.githubusercontent.com/KillingJacky/SlackThunder/master/config.default.py# edit config.pymkdir vcode docker run â€“name slackthunder -v `pwd`/config.py:/app/config.py:ro -v `pwd`/vcode:/app/vcode â€“env SLACK_TOKEN=â€™your-token-hereâ€™ -d killingjacky/slackthunder docker logs -f slackthunder ç¡®è®¤è¿…é›·ç™»é™†æˆåŠŸï¼ˆæœ‰æ—¶éœ€è¦å¡«å†™éªŒè¯ç ï¼‰ï¼Œç¡®è®¤slack connectedï¼ˆæœ‰æ—¶ä¼šè¿žä¸ä¸Šï¼‰ã€‚ ä½¿ç”¨å‘½ä»¤è¡Œè¿›å…¥ç›¸åº”çš„channelï¼Œé»˜è®¤é…ç½®ä¸º#thunderï¼š login logout listdev - list the downloader devices select {index} - select the downloader adddir {dir} - add a download target dir listdir - list all the saved target dirs rmdir {dir} - remove a preset download target dir cleardir - clear all the saved target dirs {url} - download into the default target dir (configured on yc.xunlei.com) {url} {index} - download into the index selected target dir info or list - list the downloading status listfini - list the finished tasks (recent 10) rmtask {index} - stop the index selected task and trash it ping - test if the slack script is working æ‰‹æœºAppä»¥iOSä¸ºä¾‹ï¼Œåœ¨safariä¸­é•¿æŒ‰é“¾æŽ¥ï¼ˆç£åŠ›é“¾ï¼Œæ™®é€šä¸‹è½½é“¾ç­‰ï¼‰-&gt; åˆ†äº« -&gt; é€‰æ‹©Slack -&gt; é€‰æ‹©ç›¸åº”çš„channel -&gt; å‘é€ã€‚è¿™ä¹Ÿæ˜¯æˆ‘å†™è¿™ä¸ªå°ç¨‹åºçš„æœ€åˆéœ€æ±‚å‡ºå‘ç‚¹ï¼ˆè¿…é›·è¿œç¨‹ç½‘ç«™æ— æ‰‹æœºç‰ˆï¼Œå¤åˆ¶ç²˜è´´é“¾æŽ¥éžå¸¸éº»çƒ¦ï¼‰ã€‚ åè®®/å£°æ˜Žæœ¬ç¨‹åºè¿…é›·è¿œç¨‹åè®®å‚è€ƒhttps://github.com/iambus/xunlei-lixian é¸£è°¢ï¼Œå¹¶è·ŸéšMITåè®®ã€‚ Github: https://github.com/KillingJacky/SlackThunder è‹¥æŸå…¬å¸è®¤ä¸ºæˆ‘ä¸åº”å…¬å¼€å…¶APIï¼ˆæŠ“åŒ…æ‰€å¾—ï¼‰ï¼Œè¯·è”ç³»æˆ‘ã€‚]]></content>
      <tags>
        <tag>tech</tag>
        <tag>slack</tag>
        <tag>thunder api</tag>
        <tag>è¿…é›·è¿œç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Arm the Xiaomi R1D router into a NAS,Remote Downloader,BaiduCloud Syncer]]></title>
    <url>%2F2016%2F01%2F04%2Fxiaomi-router-as-nas%2F</url>
    <content type="text"><![CDATA[Xiaomi R1D router is a high performance Broadcom BCM4709 based router with builtin 1TB SATA HDD storage. The hardware of it is really royal except the software. After a painful struggle on the stock firmware of R1D, I decide to give up the kitchen sicker stock firmware. The stuff we can play with R1D are: Flash the Tomato firmware (alternative advanced tomato with better UI) Builtin NAS support of tomato with services: USB storage, FTP, samba, DLNA Remote access with DDNS support Remote offline downloader - Xware downloader from thunder (è¿…é›·) Sync files with Baidu cloud storage - syncy.py And the released opkg capability of openwrt system for unlimited hacking The guide can be easily searched with google. Now Iâ€™m very satisfied with the advanced tomato system, thanks to the developers of tomato and advanced tomato system!]]></content>
      <tags>
        <tag>tech</tag>
        <tag>openwrt</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pitch: enable Pebble Time geo ablility getting rid of a phone]]></title>
    <url>%2F2015%2F08%2F17%2Fpebble-geo%2F</url>
    <content type="text"><![CDATA[Pebble is the most popular smart watch with a strong ability in battery life and expanding its functionality. To gain good battery life, it was designed to have no onboard/native GPS device. People must have their phone carried along to enable it using geo information. But what if people just dont wanna carry the heavy phone when they run? Or what if have no pocket to put the phone in when they do cycling? Now Pebble Time brings us a new possibility to super extend its functionality - the smartstrap interface. With this interface, we have designed some gadgets to connect Xadow with pebble. With Xadow, pebble pluses the wings of more sensors and wearable modules and is unlocked the limitation of the box. Tinkers and makers will have their unique Pebble+ with some interesting hacking. That will be fun. Letâ€™s have a pitch :D Geo information with Xadow-GPS: (please forget about the wires and the clip :D ) The smartstrap main board is also open for programming. After a few steps of workaround (soldering 4 wires to the SWD interface or the USB interface), one can program it with mbed libraries. Thatâ€™s easy enough. And with the communication protocol in pebble SDK, pebble app designers can easily read the sensors like this: 1234567891011121314151617181920212223242526272829static void extract_data_from_stream(uint8_t req, uint8_t *buff, int len)&#123; switch(req) &#123; case GET_VBAT: &#123; if (len &gt;= 4) memcpy(&amp;vbat, buff, 4); break; &#125; case GET_GPS: &#123; if(len &gt;= 18) &#123; memcpy(&amp;lat, buff, 4); buff+=4; memcpy(&amp;lon, buff, 4); buff+=4; memcpy(&amp;velocity, buff, 4); buff+=4; memcpy(&amp;alt, buff, 4); buff+=4; memcpy(&amp;fix, buff, 1); buff+=1; memcpy(&amp;sat, buff, 1); &#125; break; &#125; ... default: break; &#125;&#125; Thatâ€™s where we get now. How do you think? Always prefer feedbacks and åæ§½s. Click here to view the projectâ€™s landing page.]]></content>
      <tags>
        <tag>tech</tag>
        <tag>pebble</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Automatic sun shade for home]]></title>
    <url>%2F2015%2F08%2F14%2FAutomatic-sun-shade-for-home%2F</url>
    <content type="text"><![CDATA[This is a kind of motor driven sun shade, DIYed for the sun shine block for the balcony of my home, controlled by IR remote. Thereâ€™re some kind of sun shade controller in the market, but they are expensive and take too much space of home. So what I made is a cheap and home-brew sun shade driver and controller with most of the materials handy to get. For details, please move on to seeedstudioâ€™s recipe site. I just posted it there: http://www.seeedstudio.com/recipe/183-automatic-sun-shade-for-home.html]]></content>
      <tags>
        <tag>tech</tag>
      </tags>
  </entry>
</search>
